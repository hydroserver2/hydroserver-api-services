import pytest
import json
from collections import Counter
from django.test import Client
test = '{"value": [{"@iot.id": "3b7818af-eff7-4149-8517-e5cad9dc22e1", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')", "name": "Utah Water Research Lab", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "UWRL", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}, {"firstName": "Bob", "lastName": "Smith", "email": "bob@example.com", "organizationName": null}], "tags": [{"key": "Active", "value": "True"}, {"key": "Code", "value": "10"}], "lastUpdated": null}, "Locations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')/Locations", "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')/HistoricalLocations", "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')/Datastreams"}, {"@iot.id": "76dadda5-224b-4e1f-8570-e385bd482b2d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')", "name": "Taggart Student Center", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "TSC", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}], "tags": [{"key": "Code", "value": "20"}], "lastUpdated": null}, "Locations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')/Locations", "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')/HistoricalLocations", "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')/Datastreams"}]}'


@pytest.fixture
def base_url():
    return '/api/sensorthings/v1.1'


@pytest.mark.parametrize(
    'endpoint, method, user, max_queries, expected_response_code, request_body, expected_response', [
        (  # Test GET Things as an anonymous user.
                'Things', 'get', 'anonymous', 4, 200, None,
                '{"value": [{"@iot.id": "3b7818af-eff7-4149-8517-e5cad9dc22e1", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')", "name": "Utah Water Research Lab", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "UWRL", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}, {"firstName": "Bob", "lastName": "Smith", "email": "bob@example.com", "organizationName": null}], "tags": [{"key": "Code", "value": "10"}, {"key": "Active", "value": "True"}], "lastUpdated": null}, "Locations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')/Locations", "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')/HistoricalLocations", "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')/Datastreams"}, {"@iot.id": "76dadda5-224b-4e1f-8570-e385bd482b2d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')", "name": "Taggart Student Center", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "TSC", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}], "tags": [{"key": "Code", "value": "20"}], "lastUpdated": null}, "Locations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')/Locations", "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')/HistoricalLocations", "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')/Datastreams"}]}'
        ),
        (  # Test GET Datastreams of Thing as an anonymous user.
                'Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')/Datastreams', 'get', 'anonymous', 6, 200, None,
                '{"value": [{"@iot.id": "22074b3e-455a-4a4b-91c3-38e6cf85557d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": null, "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": null, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')/Thing", "Sensor@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')/Sensor", "ObservedProperty@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')/ObservedProperty", "Observations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')/Observations"}, {"@iot.id": "bf5542df-5500-45b4-aabc-4835534880ff", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": "2024-04-01T08:00:00Z/2024-04-03T08:00:00Z", "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": 3, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/Thing", "Sensor@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/Sensor", "ObservedProperty@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/ObservedProperty", "Observations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/Observations"}, {"@iot.id": "c9ef4139-66c6-4eee-ab7e-a4c12111f498", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'c9ef4139-66c6-4eee-ab7e-a4c12111f498\')", "name": "TSC Temperature - Empty", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": null, "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": null, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'c9ef4139-66c6-4eee-ab7e-a4c12111f498\')/Thing", "Sensor@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'c9ef4139-66c6-4eee-ab7e-a4c12111f498\')/Sensor", "ObservedProperty@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'c9ef4139-66c6-4eee-ab7e-a4c12111f498\')/ObservedProperty", "Observations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'c9ef4139-66c6-4eee-ab7e-a4c12111f498\')/Observations"}]}'        ),
        (  # Test GET Locations of Thing as an anonymous user.
                'Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')/Locations', 'get', 'anonymous', 7, 200, None,
                '{"value": [{"@iot.id": "8a6f1578-060a-40d9-9064-f8c4af4da80d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')", "name": "Location for Utah Water Research Lab", "description": "A test location.", "encodingType": "application/geo+json", "location": {"type": "Feature", "geometry": {"type": "Point", "coordinates": [41.739742, -111.793766]}, "properties": {}}, "properties": {"state": "UT", "county": "Cache", "elevation_m": 1.0, "elevationDatum": "WGS84", "lastUpdated": null}, "Things@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')/Things", "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')/HistoricalLocations"}]}'
        ),
        (  # Test GET Things with count parameter.
                'Things?$count=true', 'get', 'anonymous', 5, 200, None,
                '{"@iot.count": 2, "value": [{"@iot.id": "3b7818af-eff7-4149-8517-e5cad9dc22e1", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')", "name": "Utah Water Research Lab", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "UWRL", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}, {"firstName": "Bob", "lastName": "Smith", "email": "bob@example.com", "organizationName": null}], "tags": [{"key": "Code", "value": "10"}, {"key": "Active", "value": "True"}], "lastUpdated": null}, "Locations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')/Locations", "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')/HistoricalLocations", "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')/Datastreams"}, {"@iot.id": "76dadda5-224b-4e1f-8570-e385bd482b2d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')", "name": "Taggart Student Center", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "TSC", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}], "tags": [{"key": "Code", "value": "20"}], "lastUpdated": null}, "Locations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')/Locations", "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')/HistoricalLocations", "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')/Datastreams"}]}'
        ),
        (  # Test GET Things with filter parameter.
                'Things?$filter=name eq \'Utah Water Research Lab\'', 'get', 'anonymous', 4, 200, None,
                '{"value": [{"@iot.id": "3b7818af-eff7-4149-8517-e5cad9dc22e1", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')", "name": "Utah Water Research Lab", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "UWRL", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}, {"firstName": "Bob", "lastName": "Smith", "email": "bob@example.com", "organizationName": null}], "tags": [{"key": "Active", "value": "True"}, {"key": "Code", "value": "10"}], "lastUpdated": null}, "Locations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')/Locations", "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')/HistoricalLocations", "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')/Datastreams"}]}'
        ),
        (  # Test GET Things with  skip parameter.
                'Things?$skip=1', 'get', 'anonymous', 4, 200, None,
                '{"value": [{"@iot.id": "76dadda5-224b-4e1f-8570-e385bd482b2d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')", "name": "Taggart Student Center", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "TSC", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}], "tags": [{"key": "Code", "value": "20"}], "lastUpdated": null}, "Locations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')/Locations", "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')/HistoricalLocations", "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')/Datastreams"}]}'
        ),
        (  # Test GET Things with top parameter.
                'Things?$top=1', 'get', 'anonymous', 4, 200, None,
                '{"value": [{"@iot.id": "3b7818af-eff7-4149-8517-e5cad9dc22e1", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')", "name": "Utah Water Research Lab", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "UWRL", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}, {"firstName": "Bob", "lastName": "Smith", "email": "bob@example.com", "organizationName": null}], "tags": [{"key": "Active", "value": "True"}, {"key": "Code", "value": "10"}], "lastUpdated": null}, "Locations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')/Locations", "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')/HistoricalLocations", "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')/Datastreams"}], "@iot.nextLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things?$skip=1&$top=1"}'
        ),
        (  # Test GET Things with expand parameter.
                'Things?$expand=Locations,Datastreams/Sensor', 'get', 'anonymous', 13, 200, None,
                '{"value": [{"@iot.id": "3b7818af-eff7-4149-8517-e5cad9dc22e1", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')", "name": "Utah Water Research Lab", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "UWRL", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}, {"firstName": "Bob", "lastName": "Smith", "email": "bob@example.com", "organizationName": null}], "tags": [{"key": "Code", "value": "10"}, {"key": "Active", "value": "True"}], "lastUpdated": null}, "Locations": [{"@iot.id": "8a6f1578-060a-40d9-9064-f8c4af4da80d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')", "name": "Location for Utah Water Research Lab", "description": "A test location.", "encodingType": "application/geo+json", "location": {"type": "Feature", "geometry": {"type": "Point", "coordinates": [41.739742, -111.793766]}, "properties": {}}, "properties": {"state": "UT", "county": "Cache", "elevation_m": 1.0, "elevationDatum": "WGS84", "lastUpdated": null}}], "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')/HistoricalLocations", "Datastreams": []}, {"@iot.id": "76dadda5-224b-4e1f-8570-e385bd482b2d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')", "name": "Taggart Student Center", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "TSC", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}], "tags": [{"key": "Code", "value": "20"}], "lastUpdated": null}, "Locations": [{"@iot.id": "5bba0397-096b-4d60-a3f0-c00f1e6e85da", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'5bba0397-096b-4d60-a3f0-c00f1e6e85da\')", "name": "Location for Taggart Student Center", "description": "A test location.", "encodingType": "application/geo+json", "location": {"type": "Feature", "geometry": {"type": "Point", "coordinates": [41.743042, -111.81325]}, "properties": {}}, "properties": {"state": "UT", "county": "Cache", "elevation_m": 1.0, "elevationDatum": "WGS84", "lastUpdated": null}}], "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')/HistoricalLocations", "Datastreams": [{"@iot.id": "22074b3e-455a-4a4b-91c3-38e6cf85557d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": null, "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": null, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Sensor": {"@iot.id": "a9e79b5a-ae38-4314-abb0-604ee8d6049c", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'a9e79b5a-ae38-4314-abb0-604ee8d6049c\')", "name": "Sensor", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}}]}]}'
        ),
        (  # Test GET Locations as an anonymous user.
                'Locations', 'get', 'anonymous', 3, 200, None,
                '{"value": [{"@iot.id": "8a6f1578-060a-40d9-9064-f8c4af4da80d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')", "name": "Location for Utah Water Research Lab", "description": "A test location.", "encodingType": "application/geo+json", "location": {"type": "Feature", "geometry": {"type": "Point", "coordinates": [41.739742, -111.793766]}, "properties": {}}, "properties": {"state": "UT", "county": "Cache", "elevation_m": 1.0, "elevationDatum": "WGS84", "lastUpdated": null}, "Things@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')/Things", "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')/HistoricalLocations"}, {"@iot.id": "5bba0397-096b-4d60-a3f0-c00f1e6e85da", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'5bba0397-096b-4d60-a3f0-c00f1e6e85da\')", "name": "Location for Taggart Student Center", "description": "A test location.", "encodingType": "application/geo+json", "location": {"type": "Feature", "geometry": {"type": "Point", "coordinates": [41.743042, -111.81325]}, "properties": {}}, "properties": {"state": "UT", "county": "Cache", "elevation_m": 1.0, "elevationDatum": "WGS84", "lastUpdated": null}, "Things@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'5bba0397-096b-4d60-a3f0-c00f1e6e85da\')/Things", "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'5bba0397-096b-4d60-a3f0-c00f1e6e85da\')/HistoricalLocations"}]}'
        ),
        (  # Test GET Things of Location as an anonymous user.
                'Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')/Things', 'get', 'anonymous', 7, 200, None,
                '{"value": [{"@iot.id": "3b7818af-eff7-4149-8517-e5cad9dc22e1", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')", "name": "Utah Water Research Lab", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "UWRL", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}, {"firstName": "Bob", "lastName": "Smith", "email": "bob@example.com", "organizationName": null}], "tags": [{"key": "Active", "value": "True"}, {"key": "Code", "value": "10"}], "lastUpdated": null}, "Locations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')/Locations", "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')/HistoricalLocations", "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')/Datastreams"}]}'        ),
        (  # Test GET Locations with count parameter.
                'Locations?$count=true', 'get', 'anonymous', 4, 200, None,
                '{"@iot.count": 2, "value": [{"@iot.id": "8a6f1578-060a-40d9-9064-f8c4af4da80d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')", "name": "Location for Utah Water Research Lab", "description": "A test location.", "encodingType": "application/geo+json", "location": {"type": "Feature", "geometry": {"type": "Point", "coordinates": [41.739742, -111.793766]}, "properties": {}}, "properties": {"state": "UT", "county": "Cache", "elevation_m": 1.0, "elevationDatum": "WGS84", "lastUpdated": null}, "Things@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')/Things", "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')/HistoricalLocations"}, {"@iot.id": "5bba0397-096b-4d60-a3f0-c00f1e6e85da", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'5bba0397-096b-4d60-a3f0-c00f1e6e85da\')", "name": "Location for Taggart Student Center", "description": "A test location.", "encodingType": "application/geo+json", "location": {"type": "Feature", "geometry": {"type": "Point", "coordinates": [41.743042, -111.81325]}, "properties": {}}, "properties": {"state": "UT", "county": "Cache", "elevation_m": 1.0, "elevationDatum": "WGS84", "lastUpdated": null}, "Things@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'5bba0397-096b-4d60-a3f0-c00f1e6e85da\')/Things", "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'5bba0397-096b-4d60-a3f0-c00f1e6e85da\')/HistoricalLocations"}]}'
        ),
        (  # Test GET Locations with filter parameter.
                'Locations?$filter=name eq \'Location for Utah Water Research Lab\'', 'get', 'anonymous', 3, 200, None,
                '{"value": [{"@iot.id": "8a6f1578-060a-40d9-9064-f8c4af4da80d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')", "name": "Location for Utah Water Research Lab", "description": "A test location.", "encodingType": "application/geo+json", "location": {"type": "Feature", "geometry": {"type": "Point", "coordinates": [41.739742, -111.793766]}, "properties": {}}, "properties": {"state": "UT", "county": "Cache", "elevation_m": 1.0, "elevationDatum": "WGS84", "lastUpdated": null}, "Things@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')/Things", "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')/HistoricalLocations"}]}'
        ),
        (  # Test GET Locations with skip parameter.
                'Locations?$skip=1', 'get', 'anonymous', 3, 200, None,
                '{"value": [{"@iot.id": "5bba0397-096b-4d60-a3f0-c00f1e6e85da", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'5bba0397-096b-4d60-a3f0-c00f1e6e85da\')", "name": "Location for Taggart Student Center", "description": "A test location.", "encodingType": "application/geo+json", "location": {"type": "Feature", "geometry": {"type": "Point", "coordinates": [41.743042, -111.81325]}, "properties": {}}, "properties": {"state": "UT", "county": "Cache", "elevation_m": 1.0, "elevationDatum": "WGS84", "lastUpdated": null}, "Things@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'5bba0397-096b-4d60-a3f0-c00f1e6e85da\')/Things", "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'5bba0397-096b-4d60-a3f0-c00f1e6e85da\')/HistoricalLocations"}]}'
        ),
        (  # Test GET Locations with top parameter.
                'Locations?$top=1', 'get', 'anonymous', 3, 200, None,
                '{"value": [{"@iot.id": "8a6f1578-060a-40d9-9064-f8c4af4da80d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')", "name": "Location for Utah Water Research Lab", "description": "A test location.", "encodingType": "application/geo+json", "location": {"type": "Feature", "geometry": {"type": "Point", "coordinates": [41.739742, -111.793766]}, "properties": {}}, "properties": {"state": "UT", "county": "Cache", "elevation_m": 1.0, "elevationDatum": "WGS84", "lastUpdated": null}, "Things@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')/Things", "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')/HistoricalLocations"}], "@iot.nextLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations?$skip=1&$top=1"}'
        ),
        (  # Test GET Locations with expand parameter.
                'Locations?$expand=Things/Datastreams/ObservedProperty', 'get', 'anonymous', 13, 200, None,
                '{"value": [{"@iot.id": "8a6f1578-060a-40d9-9064-f8c4af4da80d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')", "name": "Location for Utah Water Research Lab", "description": "A test location.", "encodingType": "application/geo+json", "location": {"type": "Feature", "geometry": {"type": "Point", "coordinates": [41.739742, -111.793766]}, "properties": {}}, "properties": {"state": "UT", "county": "Cache", "elevation_m": 1.0, "elevationDatum": "WGS84", "lastUpdated": null}, "Things": [{"@iot.id": "3b7818af-eff7-4149-8517-e5cad9dc22e1", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')", "name": "Utah Water Research Lab", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "UWRL", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}, {"firstName": "Bob", "lastName": "Smith", "email": "bob@example.com", "organizationName": null}], "tags": [{"key": "Code", "value": "10"}, {"key": "Active", "value": "True"}], "lastUpdated": null}, "Datastreams": []}], "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')/HistoricalLocations"}, {"@iot.id": "5bba0397-096b-4d60-a3f0-c00f1e6e85da", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'5bba0397-096b-4d60-a3f0-c00f1e6e85da\')", "name": "Location for Taggart Student Center", "description": "A test location.", "encodingType": "application/geo+json", "location": {"type": "Feature", "geometry": {"type": "Point", "coordinates": [41.743042, -111.81325]}, "properties": {}}, "properties": {"state": "UT", "county": "Cache", "elevation_m": 1.0, "elevationDatum": "WGS84", "lastUpdated": null}, "Things": [{"@iot.id": "76dadda5-224b-4e1f-8570-e385bd482b2d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')", "name": "Taggart Student Center", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "TSC", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}], "tags": [{"key": "Code", "value": "20"}], "lastUpdated": null}, "Datastreams": [{"@iot.id": "22074b3e-455a-4a4b-91c3-38e6cf85557d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": null, "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": null, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "ObservedProperty": {"@iot.id": "cda18a59-3f2c-4c09-976f-3eadc34423bb", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'cda18a59-3f2c-4c09-976f-3eadc34423bb\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}}}]}], "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'5bba0397-096b-4d60-a3f0-c00f1e6e85da\')/HistoricalLocations"}]}'
        ),
        (  # Test GET HistoricalLocations as an anonymous user.
                'HistoricalLocations', 'get', 'anonymous', 3, 200, None,
                '{"value": []}'
        ),
        (  # Test GET Sensors as anonymous user.
                'Sensors', 'get', 'anonymous', 4, 200, None,
                '{"value": [{"@iot.id": "a8617070-146a-4e82-8b4d-9a6563de6265", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'a8617070-146a-4e82-8b4d-9a6563de6265\')", "name": "Sensor", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'a8617070-146a-4e82-8b4d-9a6563de6265\')/Datastreams", "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}, {"@iot.id": "c45c6050-dc52-4a37-a562-66816a6ef1b5", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'c45c6050-dc52-4a37-a562-66816a6ef1b5\')", "name": "Sensor", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'c45c6050-dc52-4a37-a562-66816a6ef1b5\')/Datastreams", "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}, {"@iot.id": "41ebe791-3868-4c09-9744-f6954d295edc", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'41ebe791-3868-4c09-9744-f6954d295edc\')", "name": "test_sensor_2", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'41ebe791-3868-4c09-9744-f6954d295edc\')/Datastreams", "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}, {"@iot.id": "5fbab69a-810b-4044-bfac-c40a05634c5c", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'5fbab69a-810b-4044-bfac-c40a05634c5c\')", "name": "test_sensor_2", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'5fbab69a-810b-4044-bfac-c40a05634c5c\')/Datastreams", "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}, {"@iot.id": "a9e79b5a-ae38-4314-abb0-604ee8d6049c", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'a9e79b5a-ae38-4314-abb0-604ee8d6049c\')", "name": "Sensor", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'a9e79b5a-ae38-4314-abb0-604ee8d6049c\')/Datastreams", "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}]}'
        ),
        (  # Test GET Sensors with count parameter.
                'Sensors?$count=true', 'get', 'anonymous', 4, 200, None,
                '{"@iot.count": 5, "value": [{"@iot.id": "a8617070-146a-4e82-8b4d-9a6563de6265", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'a8617070-146a-4e82-8b4d-9a6563de6265\')", "name": "Sensor", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'a8617070-146a-4e82-8b4d-9a6563de6265\')/Datastreams", "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}, {"@iot.id": "c45c6050-dc52-4a37-a562-66816a6ef1b5", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'c45c6050-dc52-4a37-a562-66816a6ef1b5\')", "name": "Sensor", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'c45c6050-dc52-4a37-a562-66816a6ef1b5\')/Datastreams", "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}, {"@iot.id": "41ebe791-3868-4c09-9744-f6954d295edc", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'41ebe791-3868-4c09-9744-f6954d295edc\')", "name": "test_sensor_2", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'41ebe791-3868-4c09-9744-f6954d295edc\')/Datastreams", "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}, {"@iot.id": "5fbab69a-810b-4044-bfac-c40a05634c5c", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'5fbab69a-810b-4044-bfac-c40a05634c5c\')", "name": "test_sensor_2", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'5fbab69a-810b-4044-bfac-c40a05634c5c\')/Datastreams", "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}, {"@iot.id": "a9e79b5a-ae38-4314-abb0-604ee8d6049c", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'a9e79b5a-ae38-4314-abb0-604ee8d6049c\')", "name": "Sensor", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'a9e79b5a-ae38-4314-abb0-604ee8d6049c\')/Datastreams", "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}]}'
        ),
        (  # Test GET Sensors with filter parameter.
                'Sensors?$filter=name eq \'test_sensor_2\'', 'get', 'anonymous', 3, 200, None,
                '{"value": [{"@iot.id": "41ebe791-3868-4c09-9744-f6954d295edc", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'41ebe791-3868-4c09-9744-f6954d295edc\')", "name": "test_sensor_2", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'41ebe791-3868-4c09-9744-f6954d295edc\')/Datastreams", "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}, {"@iot.id": "5fbab69a-810b-4044-bfac-c40a05634c5c", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'5fbab69a-810b-4044-bfac-c40a05634c5c\')", "name": "test_sensor_2", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'5fbab69a-810b-4044-bfac-c40a05634c5c\')/Datastreams", "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}]}'
        ),
        (  # Test GET Sensors with skip parameter.
                'Sensors?$skip=1', 'get', 'anonymous', 3, 200, None,
                '{"value": [{"@iot.id": "c45c6050-dc52-4a37-a562-66816a6ef1b5", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'c45c6050-dc52-4a37-a562-66816a6ef1b5\')", "name": "Sensor", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'c45c6050-dc52-4a37-a562-66816a6ef1b5\')/Datastreams", "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}, {"@iot.id": "41ebe791-3868-4c09-9744-f6954d295edc", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'41ebe791-3868-4c09-9744-f6954d295edc\')", "name": "test_sensor_2", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'41ebe791-3868-4c09-9744-f6954d295edc\')/Datastreams", "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}, {"@iot.id": "5fbab69a-810b-4044-bfac-c40a05634c5c", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'5fbab69a-810b-4044-bfac-c40a05634c5c\')", "name": "test_sensor_2", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'5fbab69a-810b-4044-bfac-c40a05634c5c\')/Datastreams", "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}, {"@iot.id": "a9e79b5a-ae38-4314-abb0-604ee8d6049c", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'a9e79b5a-ae38-4314-abb0-604ee8d6049c\')", "name": "Sensor", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'a9e79b5a-ae38-4314-abb0-604ee8d6049c\')/Datastreams", "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}]}'
        ),
        (  # Test GET Sensors with top parameter.
                'Sensors?$top=1', 'get', 'anonymous', 3, 200, None,
                '{"value": [{"@iot.id": "41ebe791-3868-4c09-9744-f6954d295edc", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'41ebe791-3868-4c09-9744-f6954d295edc\')", "name": "test_sensor_2", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'41ebe791-3868-4c09-9744-f6954d295edc\')/Datastreams", "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}], "@iot.nextLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors?$skip=1&$top=1"}'
        ),
        (  # Test GET Sensors with expand parameter.
                'Sensors?$expand=Datastreams', 'get', 'anonymous', 10, 200, None,
                '{"value": [{"@iot.id": "a8617070-146a-4e82-8b4d-9a6563de6265", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'a8617070-146a-4e82-8b4d-9a6563de6265\')", "name": "Sensor", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "Datastreams": [], "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}, {"@iot.id": "c45c6050-dc52-4a37-a562-66816a6ef1b5", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'c45c6050-dc52-4a37-a562-66816a6ef1b5\')", "name": "Sensor", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "Datastreams": [], "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}, {"@iot.id": "41ebe791-3868-4c09-9744-f6954d295edc", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'41ebe791-3868-4c09-9744-f6954d295edc\')", "name": "test_sensor_2", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "Datastreams": [], "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}, {"@iot.id": "5fbab69a-810b-4044-bfac-c40a05634c5c", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'5fbab69a-810b-4044-bfac-c40a05634c5c\')", "name": "test_sensor_2", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "Datastreams": [], "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}, {"@iot.id": "a9e79b5a-ae38-4314-abb0-604ee8d6049c", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'a9e79b5a-ae38-4314-abb0-604ee8d6049c\')", "name": "Sensor", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "Datastreams": [{"@iot.id": "22074b3e-455a-4a4b-91c3-38e6cf85557d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": null, "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": null, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}}, {"@iot.id": "bf5542df-5500-45b4-aabc-4835534880ff", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": "2024-04-01T08:00:00Z/2024-04-03T08:00:00Z", "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": 3, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}}, {"@iot.id": "c9ef4139-66c6-4eee-ab7e-a4c12111f498", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'c9ef4139-66c6-4eee-ab7e-a4c12111f498\')", "name": "TSC Temperature - Empty", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": null, "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": null, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}}], "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}]}'
        ),
        (  # Test GET ObservedProperties as anonymous user.
                'ObservedProperties', 'get', 'anonymous', 4, 200, None,
                '{"value": [{"@iot.id": "c1479bbc-3d7e-449c-ad3a-0a1c7742b460", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'c1479bbc-3d7e-449c-ad3a-0a1c7742b460\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'c1479bbc-3d7e-449c-ad3a-0a1c7742b460\')/Datastreams"}, {"@iot.id": "2f89ca87-667f-4de9-b850-715db3cbf927", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'2f89ca87-667f-4de9-b850-715db3cbf927\')", "name": "Velocity", "definition": "http://www.example.com/velocity", "description": "A test property.", "properties": {"variableCode": "VELO", "variableType": "Variable", "lastUpdated": null}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'2f89ca87-667f-4de9-b850-715db3cbf927\')/Datastreams"}, {"@iot.id": "b6bfee6e-b8d6-46cd-972a-bdd56bd41bd1", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'b6bfee6e-b8d6-46cd-972a-bdd56bd41bd1\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'b6bfee6e-b8d6-46cd-972a-bdd56bd41bd1\')/Datastreams"}, {"@iot.id": "cda18a59-3f2c-4c09-976f-3eadc34423bb", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'cda18a59-3f2c-4c09-976f-3eadc34423bb\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'cda18a59-3f2c-4c09-976f-3eadc34423bb\')/Datastreams"}, {"@iot.id": "11e37e36-3d65-497a-b432-e238ec45195b", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'11e37e36-3d65-497a-b432-e238ec45195b\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'11e37e36-3d65-497a-b432-e238ec45195b\')/Datastreams"}]}'
        ),
        (  # Test GET ObservedProperties with count parameter.
                'ObservedProperties?$count=true', 'get', 'anonymous', 4, 200, None,
                '{"@iot.count": 5, "value": [{"@iot.id": "c1479bbc-3d7e-449c-ad3a-0a1c7742b460", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'c1479bbc-3d7e-449c-ad3a-0a1c7742b460\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'c1479bbc-3d7e-449c-ad3a-0a1c7742b460\')/Datastreams"}, {"@iot.id": "2f89ca87-667f-4de9-b850-715db3cbf927", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'2f89ca87-667f-4de9-b850-715db3cbf927\')", "name": "Velocity", "definition": "http://www.example.com/velocity", "description": "A test property.", "properties": {"variableCode": "VELO", "variableType": "Variable", "lastUpdated": null}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'2f89ca87-667f-4de9-b850-715db3cbf927\')/Datastreams"}, {"@iot.id": "b6bfee6e-b8d6-46cd-972a-bdd56bd41bd1", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'b6bfee6e-b8d6-46cd-972a-bdd56bd41bd1\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'b6bfee6e-b8d6-46cd-972a-bdd56bd41bd1\')/Datastreams"}, {"@iot.id": "cda18a59-3f2c-4c09-976f-3eadc34423bb", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'cda18a59-3f2c-4c09-976f-3eadc34423bb\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'cda18a59-3f2c-4c09-976f-3eadc34423bb\')/Datastreams"}, {"@iot.id": "11e37e36-3d65-497a-b432-e238ec45195b", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'11e37e36-3d65-497a-b432-e238ec45195b\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'11e37e36-3d65-497a-b432-e238ec45195b\')/Datastreams"}]}'
        ),
        (  # Test GET ObservedProperties with filter parameter.
                'ObservedProperties?$filter=name eq \'Temperature\'', 'get', 'anonymous', 3, 200, None,
                '{"value": [{"@iot.id": "11e37e36-3d65-497a-b432-e238ec45195b", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'11e37e36-3d65-497a-b432-e238ec45195b\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'11e37e36-3d65-497a-b432-e238ec45195b\')/Datastreams"}, {"@iot.id": "b6bfee6e-b8d6-46cd-972a-bdd56bd41bd1", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'b6bfee6e-b8d6-46cd-972a-bdd56bd41bd1\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'b6bfee6e-b8d6-46cd-972a-bdd56bd41bd1\')/Datastreams"}, {"@iot.id": "c1479bbc-3d7e-449c-ad3a-0a1c7742b460", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'c1479bbc-3d7e-449c-ad3a-0a1c7742b460\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'c1479bbc-3d7e-449c-ad3a-0a1c7742b460\')/Datastreams"}, {"@iot.id": "cda18a59-3f2c-4c09-976f-3eadc34423bb", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'cda18a59-3f2c-4c09-976f-3eadc34423bb\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'cda18a59-3f2c-4c09-976f-3eadc34423bb\')/Datastreams"}]}'
        ),
        (  # Test GET ObservedProperties with skip parameter.
                'ObservedProperties?$skip=1', 'get', 'anonymous', 3, 200, None,
                '{"value": [{"@iot.id": "2f89ca87-667f-4de9-b850-715db3cbf927", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'2f89ca87-667f-4de9-b850-715db3cbf927\')", "name": "Velocity", "definition": "http://www.example.com/velocity", "description": "A test property.", "properties": {"variableCode": "VELO", "variableType": "Variable", "lastUpdated": null}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'2f89ca87-667f-4de9-b850-715db3cbf927\')/Datastreams"}, {"@iot.id": "b6bfee6e-b8d6-46cd-972a-bdd56bd41bd1", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'b6bfee6e-b8d6-46cd-972a-bdd56bd41bd1\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'b6bfee6e-b8d6-46cd-972a-bdd56bd41bd1\')/Datastreams"}, {"@iot.id": "cda18a59-3f2c-4c09-976f-3eadc34423bb", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'cda18a59-3f2c-4c09-976f-3eadc34423bb\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'cda18a59-3f2c-4c09-976f-3eadc34423bb\')/Datastreams"}, {"@iot.id": "11e37e36-3d65-497a-b432-e238ec45195b", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'11e37e36-3d65-497a-b432-e238ec45195b\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'11e37e36-3d65-497a-b432-e238ec45195b\')/Datastreams"}]}'
        ),
        (  # Test GET ObservedProperties with top parameter.
                'ObservedProperties?$top=1', 'get', 'anonymous', 3, 200, None,
                '{"value": [{"@iot.id": "c1479bbc-3d7e-449c-ad3a-0a1c7742b460", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'c1479bbc-3d7e-449c-ad3a-0a1c7742b460\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'c1479bbc-3d7e-449c-ad3a-0a1c7742b460\')/Datastreams"}], "@iot.nextLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties?$skip=1&$top=1"}'
        ),
        (  # Test GET ObservedProperties with expand parameter.
                'ObservedProperties?$expand=Datastreams', 'get', 'anonymous', 10, 200, None,
                '{"value": [{"@iot.id": "c1479bbc-3d7e-449c-ad3a-0a1c7742b460", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'c1479bbc-3d7e-449c-ad3a-0a1c7742b460\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}, "Datastreams": []}, {"@iot.id": "2f89ca87-667f-4de9-b850-715db3cbf927", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'2f89ca87-667f-4de9-b850-715db3cbf927\')", "name": "Velocity", "definition": "http://www.example.com/velocity", "description": "A test property.", "properties": {"variableCode": "VELO", "variableType": "Variable", "lastUpdated": null}, "Datastreams": []}, {"@iot.id": "b6bfee6e-b8d6-46cd-972a-bdd56bd41bd1", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'b6bfee6e-b8d6-46cd-972a-bdd56bd41bd1\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}, "Datastreams": []}, {"@iot.id": "cda18a59-3f2c-4c09-976f-3eadc34423bb", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'cda18a59-3f2c-4c09-976f-3eadc34423bb\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}, "Datastreams": [{"@iot.id": "22074b3e-455a-4a4b-91c3-38e6cf85557d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": null, "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": null, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}}, {"@iot.id": "bf5542df-5500-45b4-aabc-4835534880ff", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": "2024-04-01T08:00:00Z/2024-04-03T08:00:00Z", "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": 3, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}}, {"@iot.id": "c9ef4139-66c6-4eee-ab7e-a4c12111f498", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'c9ef4139-66c6-4eee-ab7e-a4c12111f498\')", "name": "TSC Temperature - Empty", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": null, "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": null, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}}]}, {"@iot.id": "11e37e36-3d65-497a-b432-e238ec45195b", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'11e37e36-3d65-497a-b432-e238ec45195b\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}, "Datastreams": []}]}'
        ),
        (  # Test GET Datastreams as anonymous user.
                'Datastreams', 'get', 'anonymous', 4, 200, None,
                '{"value": [{"@iot.id": "22074b3e-455a-4a4b-91c3-38e6cf85557d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": null, "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": null, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')/Thing", "Sensor@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')/Sensor", "ObservedProperty@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')/ObservedProperty", "Observations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')/Observations"}, {"@iot.id": "bf5542df-5500-45b4-aabc-4835534880ff", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": "2024-04-01T08:00:00Z/2024-04-03T08:00:00Z", "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": 3, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/Thing", "Sensor@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/Sensor", "ObservedProperty@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/ObservedProperty", "Observations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/Observations"}, {"@iot.id": "c9ef4139-66c6-4eee-ab7e-a4c12111f498", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'c9ef4139-66c6-4eee-ab7e-a4c12111f498\')", "name": "TSC Temperature - Empty", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": null, "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": null, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'c9ef4139-66c6-4eee-ab7e-a4c12111f498\')/Thing", "Sensor@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'c9ef4139-66c6-4eee-ab7e-a4c12111f498\')/Sensor", "ObservedProperty@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'c9ef4139-66c6-4eee-ab7e-a4c12111f498\')/ObservedProperty", "Observations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'c9ef4139-66c6-4eee-ab7e-a4c12111f498\')/Observations"}]}'
        ),
        (  # Test GET Datastreams with count parameter.
                'Datastreams?$count=true', 'get', 'anonymous', 4, 200, None,
                '{"@iot.count": 3, "value": [{"@iot.id": "22074b3e-455a-4a4b-91c3-38e6cf85557d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": null, "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": null, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')/Thing", "Sensor@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')/Sensor", "ObservedProperty@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')/ObservedProperty", "Observations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')/Observations"}, {"@iot.id": "bf5542df-5500-45b4-aabc-4835534880ff", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": "2024-04-01T08:00:00Z/2024-04-03T08:00:00Z", "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": 3, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/Thing", "Sensor@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/Sensor", "ObservedProperty@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/ObservedProperty", "Observations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/Observations"}, {"@iot.id": "c9ef4139-66c6-4eee-ab7e-a4c12111f498", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'c9ef4139-66c6-4eee-ab7e-a4c12111f498\')", "name": "TSC Temperature - Empty", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": null, "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": null, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'c9ef4139-66c6-4eee-ab7e-a4c12111f498\')/Thing", "Sensor@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'c9ef4139-66c6-4eee-ab7e-a4c12111f498\')/Sensor", "ObservedProperty@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'c9ef4139-66c6-4eee-ab7e-a4c12111f498\')/ObservedProperty", "Observations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'c9ef4139-66c6-4eee-ab7e-a4c12111f498\')/Observations"}]}'
        ),
        (  # Test GET Datastreams with filter parameter.
                'Datastreams?$filter=name eq \'TSC Temperature\'', 'get', 'anonymous', 3, 200, None,
                '{"value": [{"@iot.id": "22074b3e-455a-4a4b-91c3-38e6cf85557d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": null, "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": null, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')/Thing", "Sensor@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')/Sensor", "ObservedProperty@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')/ObservedProperty", "Observations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')/Observations"}, {"@iot.id": "bf5542df-5500-45b4-aabc-4835534880ff", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": "2024-04-01T08:00:00Z/2024-04-03T08:00:00Z", "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": 3, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/Thing", "Sensor@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/Sensor", "ObservedProperty@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/ObservedProperty", "Observations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/Observations"}]}'
        ),
        (  # Test GET Datastreams with skip parameter.
                'Datastreams?$skip=1', 'get', 'anonymous', 3, 200, None,
                '{"value": [{"@iot.id": "bf5542df-5500-45b4-aabc-4835534880ff", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": "2024-04-01T08:00:00Z/2024-04-03T08:00:00Z", "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": 3, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/Thing", "Sensor@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/Sensor", "ObservedProperty@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/ObservedProperty", "Observations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/Observations"}, {"@iot.id": "c9ef4139-66c6-4eee-ab7e-a4c12111f498", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'c9ef4139-66c6-4eee-ab7e-a4c12111f498\')", "name": "TSC Temperature - Empty", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": null, "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": null, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'c9ef4139-66c6-4eee-ab7e-a4c12111f498\')/Thing", "Sensor@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'c9ef4139-66c6-4eee-ab7e-a4c12111f498\')/Sensor", "ObservedProperty@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'c9ef4139-66c6-4eee-ab7e-a4c12111f498\')/ObservedProperty", "Observations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'c9ef4139-66c6-4eee-ab7e-a4c12111f498\')/Observations"}]}'
        ),
        (  # Test GET Datastreams with top parameter.
                'Datastreams?$top=1', 'get', 'anonymous', 3, 200, None,
                '{"value": [{"@iot.id": "22074b3e-455a-4a4b-91c3-38e6cf85557d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": null, "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": null, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')/Thing", "Sensor@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')/Sensor", "ObservedProperty@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')/ObservedProperty", "Observations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')/Observations"}], "@iot.nextLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams?$skip=1&$top=1"}'
        ),
        (  # Test GET Datastreams with expand parameter.
                'Datastreams?$expand=Sensor,Thing,ObservedProperty,Observations', 'get', 'anonymous', 13, 200, None,
                '{"value": [{"@iot.id": "22074b3e-455a-4a4b-91c3-38e6cf85557d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": null, "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": null, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing": {"@iot.id": "76dadda5-224b-4e1f-8570-e385bd482b2d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')", "name": "Taggart Student Center", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "TSC", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}], "tags": [{"key": "Code", "value": "20"}], "lastUpdated": null}}, "Sensor": {"@iot.id": "a9e79b5a-ae38-4314-abb0-604ee8d6049c", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'a9e79b5a-ae38-4314-abb0-604ee8d6049c\')", "name": "Sensor", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}, "ObservedProperty": {"@iot.id": "cda18a59-3f2c-4c09-976f-3eadc34423bb", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'cda18a59-3f2c-4c09-976f-3eadc34423bb\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}}, "Observations": []}, {"@iot.id": "bf5542df-5500-45b4-aabc-4835534880ff", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": "2024-04-01T08:00:00Z/2024-04-03T08:00:00Z", "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": 3, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing": {"@iot.id": "76dadda5-224b-4e1f-8570-e385bd482b2d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')", "name": "Taggart Student Center", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "TSC", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}], "tags": [{"key": "Code", "value": "20"}], "lastUpdated": null}}, "Sensor": {"@iot.id": "a9e79b5a-ae38-4314-abb0-604ee8d6049c", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'a9e79b5a-ae38-4314-abb0-604ee8d6049c\')", "name": "Sensor", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}, "ObservedProperty": {"@iot.id": "cda18a59-3f2c-4c09-976f-3eadc34423bb", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'cda18a59-3f2c-4c09-976f-3eadc34423bb\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}}, "Observations": [{"@iot.id": "d4e7aa38-0403-437d-958d-849b55cfa015", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'d4e7aa38-0403-437d-958d-849b55cfa015\')", "phenomenonTime": "2024-04-01T08:00:00Z", "result": 17.0, "resultTime": null, "resultQuality": {"qualityCode": null, "resultQualifiers": []}}, {"@iot.id": "9dcc8283-6c4b-42db-9ca2-a5774daca342", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'9dcc8283-6c4b-42db-9ca2-a5774daca342\')", "phenomenonTime": "2024-04-02T08:00:00Z", "result": 18.0, "resultTime": null, "resultQuality": {"qualityCode": null, "resultQualifiers": []}}, {"@iot.id": "85b8e827-aeb1-4415-9647-5ae20ee04ec1", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'85b8e827-aeb1-4415-9647-5ae20ee04ec1\')", "phenomenonTime": "2024-04-03T08:00:00Z", "result": 0.0, "resultTime": null, "resultQuality": {"qualityCode": null, "resultQualifiers": [{"code": "ICE", "description": "Ice formed on the sensor."}, {"code": "PF", "description": "Power failure."}]}}]}, {"@iot.id": "c9ef4139-66c6-4eee-ab7e-a4c12111f498", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'c9ef4139-66c6-4eee-ab7e-a4c12111f498\')", "name": "TSC Temperature - Empty", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": null, "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": null, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing": {"@iot.id": "76dadda5-224b-4e1f-8570-e385bd482b2d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')", "name": "Taggart Student Center", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "TSC", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}], "tags": [{"key": "Code", "value": "20"}], "lastUpdated": null}}, "Sensor": {"@iot.id": "a9e79b5a-ae38-4314-abb0-604ee8d6049c", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'a9e79b5a-ae38-4314-abb0-604ee8d6049c\')", "name": "Sensor", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}, "ObservedProperty": {"@iot.id": "cda18a59-3f2c-4c09-976f-3eadc34423bb", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'cda18a59-3f2c-4c09-976f-3eadc34423bb\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}}, "Observations": []}]}'
        ),
        (  # Test GET Observations as anonymous user.
                'Observations', 'get', 'anonymous', 4, 200, None,
                '{"value": [{"@iot.id": "d4e7aa38-0403-437d-958d-849b55cfa015", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'d4e7aa38-0403-437d-958d-849b55cfa015\')", "phenomenonTime": "2024-04-01T08:00:00Z", "result": 17.0, "resultTime": null, "resultQuality": {"qualityCode": null, "resultQualifiers": []}, "Datastream@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'d4e7aa38-0403-437d-958d-849b55cfa015\')/Datastream", "FeatureOfInterest@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'d4e7aa38-0403-437d-958d-849b55cfa015\')/FeatureOfInterest"}, {"@iot.id": "9dcc8283-6c4b-42db-9ca2-a5774daca342", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'9dcc8283-6c4b-42db-9ca2-a5774daca342\')", "phenomenonTime": "2024-04-02T08:00:00Z", "result": 18.0, "resultTime": null, "resultQuality": {"qualityCode": null, "resultQualifiers": []}, "Datastream@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'9dcc8283-6c4b-42db-9ca2-a5774daca342\')/Datastream", "FeatureOfInterest@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'9dcc8283-6c4b-42db-9ca2-a5774daca342\')/FeatureOfInterest"}, {"@iot.id": "85b8e827-aeb1-4415-9647-5ae20ee04ec1", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'85b8e827-aeb1-4415-9647-5ae20ee04ec1\')", "phenomenonTime": "2024-04-03T08:00:00Z", "result": 0.0, "resultTime": null, "resultQuality": {"qualityCode": null, "resultQualifiers": [{"code": "ICE", "description": "Ice formed on the sensor."}, {"code": "PF", "description": "Power failure."}]}, "Datastream@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'85b8e827-aeb1-4415-9647-5ae20ee04ec1\')/Datastream", "FeatureOfInterest@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'85b8e827-aeb1-4415-9647-5ae20ee04ec1\')/FeatureOfInterest"}]}'
        ),
        (  # Test GET Observations with count parameter.
                'Observations?$count=true', 'get', 'anonymous', 4, 200, None,
                '{"@iot.count": 3, "value": [{"@iot.id": "d4e7aa38-0403-437d-958d-849b55cfa015", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'d4e7aa38-0403-437d-958d-849b55cfa015\')", "phenomenonTime": "2024-04-01T08:00:00Z", "result": 17.0, "resultTime": null, "resultQuality": {"qualityCode": null, "resultQualifiers": []}, "Datastream@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'d4e7aa38-0403-437d-958d-849b55cfa015\')/Datastream", "FeatureOfInterest@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'d4e7aa38-0403-437d-958d-849b55cfa015\')/FeatureOfInterest"}, {"@iot.id": "9dcc8283-6c4b-42db-9ca2-a5774daca342", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'9dcc8283-6c4b-42db-9ca2-a5774daca342\')", "phenomenonTime": "2024-04-02T08:00:00Z", "result": 18.0, "resultTime": null, "resultQuality": {"qualityCode": null, "resultQualifiers": []}, "Datastream@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'9dcc8283-6c4b-42db-9ca2-a5774daca342\')/Datastream", "FeatureOfInterest@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'9dcc8283-6c4b-42db-9ca2-a5774daca342\')/FeatureOfInterest"}, {"@iot.id": "85b8e827-aeb1-4415-9647-5ae20ee04ec1", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'85b8e827-aeb1-4415-9647-5ae20ee04ec1\')", "phenomenonTime": "2024-04-03T08:00:00Z", "result": 0.0, "resultTime": null, "resultQuality": {"qualityCode": null, "resultQualifiers": [{"code": "ICE", "description": "Ice formed on the sensor."}, {"code": "PF", "description": "Power failure."}]}, "Datastream@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'85b8e827-aeb1-4415-9647-5ae20ee04ec1\')/Datastream", "FeatureOfInterest@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'85b8e827-aeb1-4415-9647-5ae20ee04ec1\')/FeatureOfInterest"}]}'
        ),
        (  # Test GET Observations with filter parameter.
                'Observations?$filter=phenomenonTime eq \'2024-04-01T08:00:00%2B00:00\'', 'get', 'anonymous', 3, 200, None,
                '{"value": [{"@iot.id": "d4e7aa38-0403-437d-958d-849b55cfa015", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'d4e7aa38-0403-437d-958d-849b55cfa015\')", "phenomenonTime": "2024-04-01T08:00:00Z", "result": 17.0, "resultTime": null, "resultQuality": {"qualityCode": null, "resultQualifiers": []}, "Datastream@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'d4e7aa38-0403-437d-958d-849b55cfa015\')/Datastream", "FeatureOfInterest@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'d4e7aa38-0403-437d-958d-849b55cfa015\')/FeatureOfInterest"}]}'
        ),
        (  # Test GET Observations with skip parameter.
                'Observations?$skip=1', 'get', 'anonymous', 3, 200, None,
                '{"value": [{"@iot.id": "9dcc8283-6c4b-42db-9ca2-a5774daca342", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'9dcc8283-6c4b-42db-9ca2-a5774daca342\')", "phenomenonTime": "2024-04-02T08:00:00Z", "result": 18.0, "resultTime": null, "resultQuality": {"qualityCode": null, "resultQualifiers": []}, "Datastream@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'9dcc8283-6c4b-42db-9ca2-a5774daca342\')/Datastream", "FeatureOfInterest@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'9dcc8283-6c4b-42db-9ca2-a5774daca342\')/FeatureOfInterest"}, {"@iot.id": "85b8e827-aeb1-4415-9647-5ae20ee04ec1", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'85b8e827-aeb1-4415-9647-5ae20ee04ec1\')", "phenomenonTime": "2024-04-03T08:00:00Z", "result": 0.0, "resultTime": null, "resultQuality": {"qualityCode": null, "resultQualifiers": [{"code": "ICE", "description": "Ice formed on the sensor."}, {"code": "PF", "description": "Power failure."}]}, "Datastream@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'85b8e827-aeb1-4415-9647-5ae20ee04ec1\')/Datastream", "FeatureOfInterest@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'85b8e827-aeb1-4415-9647-5ae20ee04ec1\')/FeatureOfInterest"}]}'
        ),
        (  # Test GET Observations with top parameter.
                'Observations?$top=1', 'get', 'anonymous', 3, 200, None,
                '{"value": [{"@iot.id": "d4e7aa38-0403-437d-958d-849b55cfa015", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'d4e7aa38-0403-437d-958d-849b55cfa015\')", "phenomenonTime": "2024-04-01T08:00:00Z", "result": 17.0, "resultTime": null, "resultQuality": {"qualityCode": null, "resultQualifiers": []}, "Datastream@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'d4e7aa38-0403-437d-958d-849b55cfa015\')/Datastream", "FeatureOfInterest@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'d4e7aa38-0403-437d-958d-849b55cfa015\')/FeatureOfInterest"}], "@iot.nextLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations?$skip=1&$top=1"}'
        ),
        (  # Test GET Observations with expand parameter.
                'Observations?$expand=Datastream/Thing', 'get', 'anonymous', 10, 200, None,
                '{"value": [{"@iot.id": "d4e7aa38-0403-437d-958d-849b55cfa015", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'d4e7aa38-0403-437d-958d-849b55cfa015\')", "phenomenonTime": "2024-04-01T08:00:00Z", "result": 17.0, "resultTime": null, "resultQuality": {"qualityCode": null, "resultQualifiers": []}, "Datastream": {"@iot.id": "bf5542df-5500-45b4-aabc-4835534880ff", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": "2024-04-01T08:00:00Z/2024-04-03T08:00:00Z", "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": 3, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing": {"@iot.id": "76dadda5-224b-4e1f-8570-e385bd482b2d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')", "name": "Taggart Student Center", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "TSC", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}], "tags": [{"key": "Code", "value": "20"}], "lastUpdated": null}}}, "FeatureOfInterest@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'d4e7aa38-0403-437d-958d-849b55cfa015\')/FeatureOfInterest"}, {"@iot.id": "9dcc8283-6c4b-42db-9ca2-a5774daca342", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'9dcc8283-6c4b-42db-9ca2-a5774daca342\')", "phenomenonTime": "2024-04-02T08:00:00Z", "result": 18.0, "resultTime": null, "resultQuality": {"qualityCode": null, "resultQualifiers": []}, "Datastream": {"@iot.id": "bf5542df-5500-45b4-aabc-4835534880ff", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": "2024-04-01T08:00:00Z/2024-04-03T08:00:00Z", "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": 3, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing": {"@iot.id": "76dadda5-224b-4e1f-8570-e385bd482b2d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')", "name": "Taggart Student Center", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "TSC", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}], "tags": [{"key": "Code", "value": "20"}], "lastUpdated": null}}}, "FeatureOfInterest@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'9dcc8283-6c4b-42db-9ca2-a5774daca342\')/FeatureOfInterest"}, {"@iot.id": "85b8e827-aeb1-4415-9647-5ae20ee04ec1", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'85b8e827-aeb1-4415-9647-5ae20ee04ec1\')", "phenomenonTime": "2024-04-03T08:00:00Z", "result": 0.0, "resultTime": null, "resultQuality": {"qualityCode": null, "resultQualifiers": [{"code": "ICE", "description": "Ice formed on the sensor."}, {"code": "PF", "description": "Power failure."}]}, "Datastream": {"@iot.id": "bf5542df-5500-45b4-aabc-4835534880ff", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": "2024-04-01T08:00:00Z/2024-04-03T08:00:00Z", "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": 3, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing": {"@iot.id": "76dadda5-224b-4e1f-8570-e385bd482b2d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')", "name": "Taggart Student Center", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "TSC", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}], "tags": [{"key": "Code", "value": "20"}], "lastUpdated": null}}}, "FeatureOfInterest@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'85b8e827-aeb1-4415-9647-5ae20ee04ec1\')/FeatureOfInterest"}]}'
        ),
        (  # Test GET Observations with resultFormat parameter.
                'Observations?$resultFormat=dataArray', 'get', 'anonymous', 3, 200, None,
                '{"value": [{"Datastream@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')", "components": ["phenomenonTime", "result"], "dataArray": [["2024-04-01T08:00:00Z", 17.0], ["2024-04-02T08:00:00Z", 18.0], ["2024-04-03T08:00:00Z", 0.0]]}]}'
        ),
        (  # Test GET Observations with resultFormat parameter and all fields selected.
                'Observations?$resultFormat=dataArray&$select=@iot.id,result,phenomenonTime,resultQuality', 'get', 'anonymous', 3, 200, None,
                '{"value": [{"Datastream@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')", "components": ["@iot.id", "phenomenonTime", "result", "resultQuality"], "dataArray": [["d4e7aa38-0403-437d-958d-849b55cfa015", "2024-04-01T08:00:00Z", 17.0, {"qualityCode": null, "resultQualifiers": []}], ["9dcc8283-6c4b-42db-9ca2-a5774daca342", "2024-04-02T08:00:00Z", 18.0, {"qualityCode": null, "resultQualifiers": []}], ["85b8e827-aeb1-4415-9647-5ae20ee04ec1", "2024-04-03T08:00:00Z", 0.0, {"qualityCode": null, "resultQualifiers": [{"code": "ICE", "description": "Ice formed on the sensor."}, {"code": "PF", "description": "Power failure."}]}]]}]}'
        ),
        (  # Test GET FeaturesOfInterest as an anonymous user.
                'FeaturesOfInterest', 'get', 'anonymous', 3, 200, None,
                '{"value": []}'
        ),
        (  # Test GET SensorThings root.
                '', 'get', 'anonymous', 1, 200, None,
                '{"serverSettings": {"conformance": ["http://www.opengis.net/spec/iot_sensing/1.1/req/datamodel", "http://www.opengis.net/spec/iot_sensing/1.1/req/resource-path/resource-path-to-entities", "http://www.opengis.net/spec/iot_sensing/1.1/req/request-data", "http://www.opengis.net/spec/iot_sensing/1.1/req/create-update-delete/create-entity", "http://www.opengis.net/spec/iot_sensing/1.1/req/create-update-delete/link-to-existing-entities", "http://www.opengis.net/spec/iot_sensing/1.1/req/create-update-delete/deep-insert", "http://www.opengis.net/spec/iot_sensing/1.1/req/create-update-delete/deep-insert-status-code", "http://www.opengis.net/spec/iot_sensing/1.1/req/create-update-delete/update-entity", "http://www.opengis.net/spec/iot_sensing/1.1/req/create-update-delete/delete-entity", "http://www.opengis.net/spec/iot_sensing/1.1/req/create-update-delete/historical-location-auto-creation"]}, "value": [{"name": "Things", "url": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things"}, {"name": "Locations", "url": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations"}, {"name": "HistoricalLocations", "url": "http://127.0.0.1:3030/api/sensorthings/v1.1/HistoricalLocations"}, {"name": "Datastreams", "url": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams"}, {"name": "Sensors", "url": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors"}, {"name": "Observations", "url": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations"}, {"name": "ObservedProperties", "url": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties"}, {"name": "FeaturesOfInterest", "url": "http://127.0.0.1:3030/api/sensorthings/v1.1/FeaturesOfInterest"}]}',
        ),
        (  # Test GET Thing.
                'Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')', 'get', 'anonymous', 4, 200, None,
                '{"@iot.id": "3b7818af-eff7-4149-8517-e5cad9dc22e1", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')", "name": "Utah Water Research Lab", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "UWRL", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}, {"firstName": "Bob", "lastName": "Smith", "email": "bob@example.com", "organizationName": null}], "tags": [{"key": "Active", "value": "True"}, {"key": "Code", "value": "10"}], "lastUpdated": null}, "Locations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')/Locations", "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')/HistoricalLocations", "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')/Datastreams"}',
        ),
        (  # Test GET Thing with expand parameter.
                'Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')?$expand=Locations,Datastreams/Sensor', 'get', 'anonymous', 10, 200, None,
                '{"@iot.id": "3b7818af-eff7-4149-8517-e5cad9dc22e1", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')", "name": "Utah Water Research Lab", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "UWRL", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}, {"firstName": "Bob", "lastName": "Smith", "email": "bob@example.com", "organizationName": null}], "tags": [{"key": "Active", "value": "True"}, {"key": "Code", "value": "10"}], "lastUpdated": null}, "Locations": [{"@iot.id": "8a6f1578-060a-40d9-9064-f8c4af4da80d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')", "name": "Location for Utah Water Research Lab", "description": "A test location.", "encodingType": "application/geo+json", "location": {"type": "Feature", "geometry": {"type": "Point", "coordinates": [41.739742, -111.793766]}, "properties": {}}, "properties": {"state": "UT", "county": "Cache", "elevation_m": 1.0, "elevationDatum": "WGS84", "lastUpdated": null}}], "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')/HistoricalLocations", "Datastreams": []}',
        ),
        (  # Test GET non-existent Thing.
                'Things(\'00000000-0000-0000-0000-000000000000\')', 'get', 'anonymous', 1, 404, None,
                '{"detail": "Thing not found."}',
        ),
        (  # Test GET Location.
                'Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')', 'get', 'anonymous', 3, 200, None,
                '{"@iot.id": "8a6f1578-060a-40d9-9064-f8c4af4da80d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')", "name": "Location for Utah Water Research Lab", "description": "A test location.", "encodingType": "application/geo+json", "location": {"type": "Feature", "geometry": {"type": "Point", "coordinates": [41.739742, -111.793766]}, "properties": {}}, "properties": {"state": "UT", "county": "Cache", "elevation_m": 1.0, "elevationDatum": "WGS84", "lastUpdated": null}, "Things@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')/Things", "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')/HistoricalLocations"}',
        ),
        (  # Test GET Location with expand parameter.
                'Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')?$expand=Things/Datastreams/ObservedProperty', 'get', 'anonymous', 10, 200, None,
                '{"@iot.id": "8a6f1578-060a-40d9-9064-f8c4af4da80d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')", "name": "Location for Utah Water Research Lab", "description": "A test location.", "encodingType": "application/geo+json", "location": {"type": "Feature", "geometry": {"type": "Point", "coordinates": [41.739742, -111.793766]}, "properties": {}}, "properties": {"state": "UT", "county": "Cache", "elevation_m": 1.0, "elevationDatum": "WGS84", "lastUpdated": null}, "Things": [{"@iot.id": "3b7818af-eff7-4149-8517-e5cad9dc22e1", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'3b7818af-eff7-4149-8517-e5cad9dc22e1\')", "name": "Utah Water Research Lab", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "UWRL", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}, {"firstName": "Bob", "lastName": "Smith", "email": "bob@example.com", "organizationName": null}], "tags": [{"key": "Code", "value": "10"}, {"key": "Active", "value": "True"}], "lastUpdated": null}, "Datastreams": []}], "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'8a6f1578-060a-40d9-9064-f8c4af4da80d\')/HistoricalLocations"}'
        ),
        (  # Test GET non-existent Location.
                'Locations(\'00000000-0000-0000-0000-000000000000\')', 'get', 'anonymous', 1, 404, None,
                '{"detail": "Location not found."}',
        ),
        (  # Test GET non-existent HistoricalLocation.
                'HistoricalLocations(\'00000000-0000-0000-0000-000000000000\')', 'get', 'anonymous', 1, 404, None,
                '{"detail": "HistoricalLocation not found."}',
        ),
        (  # Test GET Sensor.
                'Sensors(\'a9e79b5a-ae38-4314-abb0-604ee8d6049c\')', 'get', 'anonymous', 3, 200, None,
                '{"@iot.id": "a9e79b5a-ae38-4314-abb0-604ee8d6049c", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'a9e79b5a-ae38-4314-abb0-604ee8d6049c\')", "name": "Sensor", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'a9e79b5a-ae38-4314-abb0-604ee8d6049c\')/Datastreams", "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}'
        ),
        (  # Test GET Sensor with expand parameter.
                'Sensors(\'a9e79b5a-ae38-4314-abb0-604ee8d6049c\')?$expand=Datastreams/Thing',
                'get', 'anonymous', 14, 200, None,
                '{"@iot.id": "a9e79b5a-ae38-4314-abb0-604ee8d6049c", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'a9e79b5a-ae38-4314-abb0-604ee8d6049c\')", "name": "Sensor", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "Datastreams": [{"@iot.id": "22074b3e-455a-4a4b-91c3-38e6cf85557d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": null, "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": null, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing": {"@iot.id": "76dadda5-224b-4e1f-8570-e385bd482b2d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')", "name": "Taggart Student Center", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "TSC", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}], "tags": [{"key": "Code", "value": "20"}], "lastUpdated": null}}}, {"@iot.id": "bf5542df-5500-45b4-aabc-4835534880ff", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": "2024-04-01T08:00:00Z/2024-04-03T08:00:00Z", "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": 3, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing": {"@iot.id": "76dadda5-224b-4e1f-8570-e385bd482b2d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')", "name": "Taggart Student Center", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "TSC", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}], "tags": [{"key": "Code", "value": "20"}], "lastUpdated": null}}}, {"@iot.id": "c9ef4139-66c6-4eee-ab7e-a4c12111f498", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'c9ef4139-66c6-4eee-ab7e-a4c12111f498\')", "name": "TSC Temperature - Empty", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": null, "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": null, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing": {"@iot.id": "76dadda5-224b-4e1f-8570-e385bd482b2d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')", "name": "Taggart Student Center", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "TSC", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}], "tags": [{"key": "Code", "value": "20"}], "lastUpdated": null}}}], "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}'
        ),
        (  # Test GET non-existent Sensor.
                'Sensors(\'00000000-0000-0000-0000-000000000000\')', 'get', 'anonymous', 1, 404, None,
                '{"detail": "Sensor not found."}',
        ),
        (  # Test GET Observed Property.
                'ObservedProperties(\'cda18a59-3f2c-4c09-976f-3eadc34423bb\')', 'get', 'anonymous', 3, 200, None,
                '{"@iot.id": "cda18a59-3f2c-4c09-976f-3eadc34423bb", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'cda18a59-3f2c-4c09-976f-3eadc34423bb\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'cda18a59-3f2c-4c09-976f-3eadc34423bb\')/Datastreams"}'
        ),
        (  # Test GET Observed Property with expand parameter.
                'ObservedProperties(\'cda18a59-3f2c-4c09-976f-3eadc34423bb\')?$expand=Datastreams/Thing',
                'get', 'anonymous', 14, 200, None,
                '{"@iot.id": "cda18a59-3f2c-4c09-976f-3eadc34423bb", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'cda18a59-3f2c-4c09-976f-3eadc34423bb\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}, "Datastreams": [{"@iot.id": "22074b3e-455a-4a4b-91c3-38e6cf85557d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'22074b3e-455a-4a4b-91c3-38e6cf85557d\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": null, "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": null, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing": {"@iot.id": "76dadda5-224b-4e1f-8570-e385bd482b2d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')", "name": "Taggart Student Center", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "TSC", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}], "tags": [{"key": "Code", "value": "20"}], "lastUpdated": null}}}, {"@iot.id": "bf5542df-5500-45b4-aabc-4835534880ff", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": "2024-04-01T08:00:00Z/2024-04-03T08:00:00Z", "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": 3, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing": {"@iot.id": "76dadda5-224b-4e1f-8570-e385bd482b2d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')", "name": "Taggart Student Center", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "TSC", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}], "tags": [{"key": "Code", "value": "20"}], "lastUpdated": null}}}, {"@iot.id": "c9ef4139-66c6-4eee-ab7e-a4c12111f498", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'c9ef4139-66c6-4eee-ab7e-a4c12111f498\')", "name": "TSC Temperature - Empty", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": null, "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": null, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing": {"@iot.id": "76dadda5-224b-4e1f-8570-e385bd482b2d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')", "name": "Taggart Student Center", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "TSC", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}], "tags": [{"key": "Code", "value": "20"}], "lastUpdated": null}}}]}'
        ),
        (  # Test GET non-existent Observed Property.
                'ObservedProperties(\'00000000-0000-0000-0000-000000000000\')', 'get', 'anonymous', 1, 404, None,
                '{"detail": "ObservedProperty not found."}',
        ),
        (  # Test GET Datastream.
                'Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')', 'get', 'anonymous', 3, 200, None,
                '{"@iot.id": "bf5542df-5500-45b4-aabc-4835534880ff", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": "2024-04-01T08:00:00Z/2024-04-03T08:00:00Z", "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": 3, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/Thing", "Sensor@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/Sensor", "ObservedProperty@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/ObservedProperty", "Observations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/Observations"}'
        ),
        (  # Test GET Datastream with expand parameter.
                'Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')?$expand=Observations,Thing/Locations,Sensor,ObservedProperty', 'get', 'anonymous', 15, 200, None,
                '{"@iot.id": "bf5542df-5500-45b4-aabc-4835534880ff", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": "2024-04-01T08:00:00Z/2024-04-03T08:00:00Z", "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": 3, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing": {"@iot.id": "76dadda5-224b-4e1f-8570-e385bd482b2d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')", "name": "Taggart Student Center", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "TSC", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}], "tags": [{"key": "Code", "value": "20"}], "lastUpdated": null}, "Locations": [{"@iot.id": "5bba0397-096b-4d60-a3f0-c00f1e6e85da", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Locations(\'5bba0397-096b-4d60-a3f0-c00f1e6e85da\')", "name": "Location for Taggart Student Center", "description": "A test location.", "encodingType": "application/geo+json", "location": {"type": "Feature", "geometry": {"type": "Point", "coordinates": [41.743042, -111.81325]}, "properties": {}}, "properties": {"state": "UT", "county": "Cache", "elevation_m": 1.0, "elevationDatum": "WGS84", "lastUpdated": null}}]}, "Sensor": {"@iot.id": "a9e79b5a-ae38-4314-abb0-604ee8d6049c", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'a9e79b5a-ae38-4314-abb0-604ee8d6049c\')", "name": "Sensor", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}, "ObservedProperty": {"@iot.id": "cda18a59-3f2c-4c09-976f-3eadc34423bb", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'cda18a59-3f2c-4c09-976f-3eadc34423bb\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}}, "Observations": [{"@iot.id": "d4e7aa38-0403-437d-958d-849b55cfa015", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'d4e7aa38-0403-437d-958d-849b55cfa015\')", "phenomenonTime": "2024-04-01T08:00:00Z", "result": 17.0, "resultTime": null, "resultQuality": {"qualityCode": null, "resultQualifiers": []}}, {"@iot.id": "9dcc8283-6c4b-42db-9ca2-a5774daca342", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'9dcc8283-6c4b-42db-9ca2-a5774daca342\')", "phenomenonTime": "2024-04-02T08:00:00Z", "result": 18.0, "resultTime": null, "resultQuality": {"qualityCode": null, "resultQualifiers": []}}, {"@iot.id": "85b8e827-aeb1-4415-9647-5ae20ee04ec1", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'85b8e827-aeb1-4415-9647-5ae20ee04ec1\')", "phenomenonTime": "2024-04-03T08:00:00Z", "result": 0.0, "resultTime": null, "resultQuality": {"qualityCode": null, "resultQualifiers": [{"code": "ICE", "description": "Ice formed on the sensor."}, {"code": "PF", "description": "Power failure."}]}}]}'
        ),
        (  # Test GET non-existent Datastream.
                'Datastreams(\'00000000-0000-0000-0000-000000000000\')', 'get', 'anonymous', 1, 404, None,
                '{"detail": "Datastream not found."}'
        ),
        (  # Test GET Sensor of a Datastream.
                'Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/Sensor', 'get', 'anonymous', 6, 200, None,
                '{"@iot.id": "a9e79b5a-ae38-4314-abb0-604ee8d6049c", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'a9e79b5a-ae38-4314-abb0-604ee8d6049c\')", "name": "Sensor", "description": "A test sensor.", "encodingType": "application/json", "properties": {}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Sensors(\'a9e79b5a-ae38-4314-abb0-604ee8d6049c\')/Datastreams", "metadata": {"methodCode": "METHOD", "methodType": "Method", "methodLink": "http://www.example.com/method", "sensorModel": {"sensorModelName": "Sensor Model", "sensorModelURL": "http://www.example.com/model", "sensorManufacturer": "Sensor Manufacturer"}, "lastUpdated": null}}'
        ),
        (  # Test GET ObservedProperty of a Datastream.
                'Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/ObservedProperty', 'get', 'anonymous', 6, 200, None,
                '{"@iot.id": "cda18a59-3f2c-4c09-976f-3eadc34423bb", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'cda18a59-3f2c-4c09-976f-3eadc34423bb\')", "name": "Temperature", "definition": "http://www.example.com/temperature", "description": "A test property.", "properties": {"variableCode": "TEMP", "variableType": "Variable", "lastUpdated": null}, "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/ObservedProperties(\'cda18a59-3f2c-4c09-976f-3eadc34423bb\')/Datastreams"}'
        ),
        (  # Test GET Thing of a Datastream.
                'Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/Thing', 'get', 'anonymous', 10, 200, None,
                '{"@iot.id": "76dadda5-224b-4e1f-8570-e385bd482b2d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')", "name": "Taggart Student Center", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "TSC", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}], "tags": [{"key": "Code", "value": "20"}], "lastUpdated": null}, "Locations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')/Locations", "HistoricalLocations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')/HistoricalLocations", "Datastreams@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')/Datastreams"}'
        ),
        (  # Test GET Observation.
                'Observations(\'d4e7aa38-0403-437d-958d-849b55cfa015\')', 'get', 'anonymous', 1, 200, None,
                '{"@iot.id": "d4e7aa38-0403-437d-958d-849b55cfa015", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'d4e7aa38-0403-437d-958d-849b55cfa015\')", "phenomenonTime": "2024-04-01T08:00:00Z", "result": 17.0, "resultTime": null, "resultQuality": {"qualityCode": null, "resultQualifiers": []}, "Datastream@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'d4e7aa38-0403-437d-958d-849b55cfa015\')/Datastream", "FeatureOfInterest@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'d4e7aa38-0403-437d-958d-849b55cfa015\')/FeatureOfInterest"}'
        ),
        (  # Test GET Observation with expand parameter.
                'Observations(\'d4e7aa38-0403-437d-958d-849b55cfa015\')?$expand=Datastream/Thing', 'get', 'anonymous', 7, 200, None,
                '{"@iot.id": "d4e7aa38-0403-437d-958d-849b55cfa015", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'d4e7aa38-0403-437d-958d-849b55cfa015\')", "phenomenonTime": "2024-04-01T08:00:00Z", "result": 17.0, "resultTime": null, "resultQuality": {"qualityCode": null, "resultQualifiers": []}, "Datastream": {"@iot.id": "bf5542df-5500-45b4-aabc-4835534880ff", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": "2024-04-01T08:00:00Z/2024-04-03T08:00:00Z", "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": 3, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing": {"@iot.id": "76dadda5-224b-4e1f-8570-e385bd482b2d", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Things(\'76dadda5-224b-4e1f-8570-e385bd482b2d\')", "name": "Taggart Student Center", "description": "A test thing.", "properties": {"samplingFeatureType": "Site", "samplingFeatureCode": "TSC", "siteType": "Other", "contactPeople": [{"firstName": "Alice", "lastName": "Johnson", "email": "alice@example.com", "organizationName": "Utah State University"}], "tags": [{"key": "Code", "value": "20"}], "lastUpdated": null}}}, "FeatureOfInterest@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Observations(\'d4e7aa38-0403-437d-958d-849b55cfa015\')/FeatureOfInterest"}'
        ),
        (  # Test GET non-existent Observation.
                'Observations(\'00000000-0000-0000-0000-000000000000\')', 'get', 'anonymous', 1, 404, None,
                '{"detail": "Observation not found."}'
        ),
        (  # Test GET Datastream of an Observation.
                'Observations(\'d4e7aa38-0403-437d-958d-849b55cfa015\')/Datastream', 'get', 'anonymous', 5, 200, None,
                '{"@iot.id": "bf5542df-5500-45b4-aabc-4835534880ff", "@iot.selfLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')", "name": "TSC Temperature", "description": "Temperature measured at the TSC.", "unitOfMeasurement": {"name": "Celsius", "symbol": "C", "definition": "http://www.example.com/celsius"}, "observationType": "http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement", "phenomenonTime": "2024-04-01T08:00:00Z/2024-04-03T08:00:00Z", "resultTime": null, "properties": {"resultType": "Time Series", "status": "Ongoing", "sampledMedium": "Air", "valueCount": 3, "noDataValue": -9999.0, "processingLevelCode": "0", "intendedTimeSpacing": null, "intendedTimeSpacingUnitOfMeasurement": null, "aggregationStatistic": "Continuous", "timeAggregationInterval": 1.0, "timeAggregationIntervalUnitOfMeasurement": "minutes", "lastUpdated": null}, "Thing@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/Thing", "Sensor@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/Sensor", "ObservedProperty@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/ObservedProperty", "Observations@iot.navigationLink": "http://127.0.0.1:3030/api/sensorthings/v1.1/Datastreams(\'bf5542df-5500-45b4-aabc-4835534880ff\')/Observations"}'
        ),
        (  # Test GET non-existent FeatureOfInterest.
                'FeaturesOfInterest(\'00000000-0000-0000-0000-000000000000\')', 'get', 'anonymous', 1, 404, None,
                '{"detail": "FeatureOfInterest not found."}'
        ),
        (  # Test POST Observation.
                'Observations', 'post', 'alice', 23, 201,
                {'phenomenonTime': '2023-10-01T10:00:00Z', 'result': 23.2, 'Datastream': {'@iot.id': 'bf5542df-5500-45b4-aabc-4835534880ff'}},
                None
        ),
        (  # Test POST Observations.
                'CreateObservations', 'post', 'alice', 23, 201,
                [{'Datastream': {'@iot.id': 'bf5542df-5500-45b4-aabc-4835534880ff'}, 'components': ['phenomenonTime', 'result'], 'dataArray': [['2023-10-02T10:00:00Z', 24.5], ['2023-10-03T10:00:00Z', 22.8]]}],
                None
        )


    ]
)
@pytest.mark.django_db()
def test_data_management_api_endpoints(
        django_assert_max_num_queries, auth_headers, base_url, endpoint, method, user, max_queries,
        expected_response_code, request_body, expected_response
):
    client = Client()

    request_kwargs = {
        'path': f'{base_url}/{endpoint}',
        **auth_headers[user]
    }

    if request_body:
        request_kwargs = {**request_kwargs, 'data': json.dumps(request_body), 'content_type': 'application/json'}

    with django_assert_max_num_queries(max_queries):
        response = getattr(client, method)(**request_kwargs)

    print(response.content)

    assert response.status_code == expected_response_code

    if expected_response is not None:
        response_json = response.json()
        expected_response_json = json.loads(expected_response)

        if isinstance(response_json, list) and isinstance(expected_response_json, list):
            assert Counter(json.dumps(d, sort_keys=True) for d in response_json) == \
                   Counter(json.dumps(d, sort_keys=True) for d in expected_response_json)
        else:
            assert json.dumps(response_json, sort_keys=True) == json.dumps(expected_response_json, sort_keys=True)
